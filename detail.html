<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="keywords" content="杨海涛个人博客|提供一个分享个人学习生活工作经验的平台">
        <meta name="description" content="杨海涛个人博客|提供一个分享个人学习生活工作经验的平台">
        <title>杨海涛个人博客</title>
        <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
        <link href="./css/common/reset.css" rel="stylesheet" type="text/css">
        <link href="./css/common/common.css" rel="stylesheet" type="text/css">
        <link href="./css/conf/detail/detail.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <div class="mod-frame">
            <div class="mod-header">
                <div class="title">杨海涛个人博客</div>
                <div class="description">活到老, 学到老。提供一个分享个人学习生活工作经验的平台</div>
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search for...">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button">Go!</button>
                    </span>
                </div>
            </div>
            <div class="mod-ctn">
                <div class="leftcn">
                    <div class="title" id="title"></div>
                    <div class="authorInfo">作者：<span>海涛</span></div>
                    <div class="authorInfo">日期：<span>2018年7月27日</span></div>
                    <div class="picture"><img id="image" src=""></div>
                    <div class="content" id="content"></div>
                </div>
                <ul class="classify" id="classify"></ul>
            </div>
        </div>

        

        <script src="./js/common/jquery.min.js"></script>
        <script src="./js/common/bootstrap.min.js"></script>
        <script src="./js/common/template.js"></script>
    </body>
</html>

<script id="classifyList" type="text/html">
    <li class="title">分类目录</li>
    {{each classList as item i}}
        <li>{{ item.type }} </li>
    {{/each}}
</script>
<script type="text/javascript">
var url = "http://116.85.25.126:8082"
var testUrl = "http://localhost:8082"

function getQueryStringByName(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
    var r = window.location.search.substr(1).match(reg);
    var context = "";
    if (r != null)
        context = r[2];
    reg = null;
    r = null;
    return context == null || context == "" || context == "undefined" ? "" : context;
}

$(function(){ 
    $.ajax({
        type:"get",
        url: url + "/api/getInfo",
        data:{id:getQueryStringByName("id")||3},
        success: function(res){
            if(res.error==0){
                var data = res.data
                $("#title").html(data.title)
                $("#content").html(data.content)
                $("#image").attr("src",data.pic)
            }
        },
        error: function(){

        }
    })

    var classList = [{
        type:"文学",
    },{
        type:"web前端技术"
    },{
        type:"linuxs操作系统"
    }]
    var classListHtml = template('classifyList', {classList:classList});
    $('#classify').html(classListHtml);
})
</script>
