<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="keywords" content="杨海涛个人博客|提供一个分享个人学习生活工作经验的平台">
        <meta name="description" content="杨海涛个人博客|提供一个分享个人学习生活工作经验的平台">
        <title>杨海涛个人博客</title>
        <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
        <!-- <link href="./css/common/bootstrap.min.css" rel="stylesheet"> -->
        <link href="./css/common/reset.css" rel="stylesheet" type="text/css">
        <link href="./css/common/common.css" rel="stylesheet" type="text/css">
        <link href="./css/conf/index/index.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <div class="mod-frame">
            <div class="mod-header">
                <div class="title">杨海涛个人博客</div>
                <div class="description">活到老, 学到老。提供一个分享个人学习生活工作经验的平台</div>
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search for...">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button">Go!</button>
                    </span>
                </div>
            </div>
            <div class="mod-ctn">
                <div class="list">
                    <ul id="list">
                        <li>
                            <div class="title">是的发生的</div>
                            <div class="describe">的郭德纲阿斯蒂芬阿斯蒂芬发生实
                                打实地方是的郭德纲阿斯蒂芬阿斯蒂芬发生实打实地方是的
                                郭德纲阿斯蒂芬阿斯蒂芬发生实打实地方是的郭德纲阿斯蒂芬阿斯蒂芬发生
                                实打实地方是的郭德纲阿斯蒂芬阿斯蒂芬发生实打实地方是的郭德纲阿
                                斯蒂芬阿斯蒂芬发生实打实地方是</div>
                            <div class="zan">
                                <span class="publish">发布于2018-08-08</span>
                                <span class="clss">属于 技术 分类</span>
                            </div>
                        </li>
                    </ul>
                    <nav aria-label="Page navigation">
                        <ul class="pagination"></ul>
                    </nav>
                </div>
                <ul class="classify" id="classify">
                    <li class="title">分类目录</li>
                    <li>技术技术技术</li>
                    <li>文学文学文学</li>
                </ul>
            </div>
        </div>


        
    <script src="./js/common/jquery.min.js"></script>
    <script src="./js/common/bootstrap.min.js"></script>
    <script src="./js/common/bootstrap-paginator.js"></script>
    <script src="./js/common/template.js"></script>
    </body>
</html>


<script id="listCnt" type="text/html">
{{each list as value i}}
    {{ if value.pic }}
    <li class="hasPic" data-id="{{value.blog_id}}">
        <div class="title">{{ value.title }}</div>
        <div class="describe">{{ value.description }}</div>
        <div class="zan">
            <span class="publish">发布于 {{value.create_time}}</span>
            <span class="clss">属于 <b>{{value.type}}</b> 分类</span>
        </div>
        <div class="pic"><img src="{{value.pic}}"></div>
    </li>
    {{ else }}
    <li data-id="{{value.blog_id}}">
        <div class="title">{{ value.title }}</div>
        <div class="describe">{{ value.description }}</div>
        <div class="zan">
            <span class="publish">发布于 {{value.create_time}}</span>
            <span class="clss">属于 <b>{{value.type}}</b> 分类</span>
        </div>
    </li>
    {{/if}}
{{/each}}
</script>

<script id="classifyList" type="text/html">
<li class="title">分类目录</li>
{{each classList as item i}}
    <li>{{ item.type }} </li>
{{/each}}
</script>

<script type="text/javascript">
var url = "http://116.85.25.126:8082"
var testUrl = "http://localhost:8082"
    $(function(){
        $.ajax({
            type:"get",
            url: url + "/api/list",
            data:{},
            success: function(res){
                if(res.data){
                    let list = res.data;
                    var html = template('listCnt', {list:list});
                    $('#list').html(html);
                }
            },
            error: function(){

            }
        })
        
        $("#list").delegate("li", "click", function(e){
            var id = $(this).data("id");
            window.location.href = "http://116.85.25.126:8888/detail.html?id="+id
        })


        // 右边分类渲染
        // var arr = ["febb50","f69581","f4e0bd","c1e4de","b7d6ec"]  // 背景颜色

        var classList = [{
            type:"文学",
        },{
            type:"web前端技术"
        },{
            type:"linuxs操作系统"
        }]
        var classListHtml = template('classifyList', {classList:classList});
        $('#classify').html(classListHtml);
        

        // 分页
        var options = {
            currentPage: 1, //当前页
            totalPages: 10, //总页数
            numberOfPages: 5, //设置控件显示的页码数
            bootstrapMajorVersion: 3,//如果是bootstrap3版本需要加此标识，并且设置包含分页内容的DOM元素为UL,如果是bootstrap2版本，则DOM包含元素是DIV
            useBootstrapTooltip: false,//是否显示tip提示框
            itemTexts:function(type,page, current){//文字翻译
                switch (type) {
                    case "first":
                        return "首页";
                    case "prev":
                        return "上一页";
                    case "next":
                        return "下一页";
                    case "last":
                        return "尾页";
                    case "page":
                        return page;
                }
            },
            onPageClicked: function (event, originalEvent, type, page) {
                console.log(event, originalEvent, type, page,999)
                //给每个页眉绑定一个事件，其实就是ajax请求
                $.ajax({
                    //......
                })
            }
        }
        $('.pagination').bootstrapPaginator(options)
    })
</script>
